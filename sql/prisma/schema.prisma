datasource db {
  provider = "postgresql"
}

generator client {
  provider = "prisma-client-js"
}

model User {
id                     String      @id @default(cuid())                                                       
email                  String      @unique                                                                    
password               String                                                                                 
createdAt              DateTime    @default(now()) @map("created_at")                                         
updatedAt              DateTime    @updatedAt @map("updated_at")                                              
first_name             String                                                                                 
last_name              String?                                                                                
status                 Boolean     @default(false)
products               Product[]
categories             Category[]  
@@map("users")  
}

model Category {
  id        String   @id @default(cuid())
  name      String
  status    Boolean  @default(false)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  user      User     @relation(fields: [userId], references: [id])
  userId    String   @map("user_id")

  products  Product[]

  @@map("categories")
  @@unique([name, userId])
  @@index([userId])
}

model Product {
  id          String   @id @default(cuid())
  name        String
  description String?
  price       Float
  status      Boolean  @default(false)
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  category    Category @relation(fields: [categoryId], references: [id])
  categoryId  String   @map("category_id")

  user        User     @relation(fields: [userId], references: [id])
  userId      String   @map("user_id")

  @@map("products")
  @@index([userId])
  @@index([categoryId])
}
